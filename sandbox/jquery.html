<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="./utilities/jquery-3.6.0.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>test JQUERY</title>
</head>
<body>
    <h1>Hello M'r Query</h1>
    <h3>I'm learning the basics of JQuery...</h3>
    <button id="HideP1">Hide P1 and Fade P4</button>
    <button id="HideP2">Hide P2</button>
    <button id="HideP3">Toggle P3</button>
    <button id="HideShowAll">Hide/show All</button>
    <button id="JCDECAUX">Ajax Call</button>

    <select name="ville" id="#cityselect">
        <option value="LYON">LYON</option>
        <option value="TOULOUSE">TOULOUSE</option>
    </select>



    <p id="p1">This is paragraph P1. Click the proper button to hide it !</p>
    <p id="p2">This is paragraph P2. Click the proper button to hide it !</p>
    <p id="p3">This is paragraph P3. Click the proper button to hide it !</p>
    <p id="p4">This is paragraph P4. Test Fading!</p>
    <p id="p5">P5 : Lorem ipsum dolor sit amet consectetur adipisicing elit. Dicta voluptatibus obcaecati eaque doloribus commodi ipsam nisi sequi nulla quas sint.</p>
    <p id="p6">P6 : test animate</p>
    <div id="oneimage">
        <img src="./images/image1.jpg" alt="">
    </div>
    <p id="copyright"></p>
    <p id="css"></p>
</body>
</html>
<script>
    let p1show = true;
    let p2show = true;
    let p1cycle = 0;
    const Version = " jquery.html: Jul 29 2022, 1.09 ";

    $(document).ready(function(){

        console.log('***********************');
        $('[id]').each( (index, element) => {
            console.log(index + ' ' + element.id);
        })

        $("#HideShowAll").click( () => {
            $("p").toggle(500);
        })
        $("#HideP1").click( () => {
            $("#p5").slideToggle(2000);
            if(p1show) {
                $("#p1").hide(2000);
                $("#HideP1").text((index, orig) => {
                    return "Show P1 (" + ++p1cycle + ")";
                });
                $("#p4").fadeOut(1000);
                p1show = false;                
            }
            else {
                $("#p1").show(2000).css("color", "red");
                $("#HideP1").text((index, orig) => {
                    return "Hide P1 (" + ++p1cycle + ")";
                });
                $("#p4").fadeIn(1000);
                p1show = true;                
            }
        });
        $("#HideP2").click( () => {
            if(p2show) {
                $("#p2").hide(1500, () => {
                    console.log("Callback when hiding P2")
                });
                $("#HideP2").text("Show p2");
                p2show = false;                
            }
            else {
                $("#p2").show();
                $("#hideP2").text("Hide p2");
                p2show = true;                
            }
        });
        $("#HideP3").click( () => {
            $("#p3").toggle(1000);
        });
        $("p").on({
            mouseenter: function(){
                $(this).css("background-color", "lightgray");
            },
            mouseleave: function(){
                $(this).css("background-color", "lightblue");
            },
            click: function(){
                $(this).css("background-color", "yellow");
            }
        });
        let div = $("#p6");
        div.css({"border":"1px solid black", "color": "blue"});
        div.animate({fontSize: '3rem'}, "slow"); 
        div.animate({fontSize: '1rem'}, "slow");    
        div.animate({fontSize: '2rem'}, "slow");

        $("#copyright").text(Version).addClass("copyright");
        $("#css").text( () => {
            let bkgcol = $("#copyright").css("background-color");
            let col = $("#copyright").css("color");
            let fsize = $("#copyright").css("font-size");
            return `Background color : ${bkgcol} color: ${col} font size : ${fsize}`;
        })     
        // Play with an image
        $("#oneimage").width(400).height(200);
        let iw = $("#oneimage").width();
        let ih = $("#oneimage").height();
        console.log(iw, ih)
        // Traversing filtering
        $("p").first().css("color", "red");
        $("p").last().css("color", "white");
        // Play with JCdecaux API
        $("#JCDECAUX").click( () => {
            let thecity = $("[name = 'ville']").val();
            if((thecity !== undefined)&&(thecity !== "")) {
                callDECAUX(thecity);
            }
        })
        // How to get the listbox selected value !!!
        $("[name = 'ville']").change( ()=> {
            let thecity = $("[name = 'ville']").val();
            if((thecity !== undefined) && (thecity !== "")) {
                callDECAUX(thecity);
            }
        })
    });
    function callDECAUX(thecity) {
        $.get("https://api.jcdecaux.com/vls/v1/stations?contract=" + thecity + "&apiKey=0b872e25a940eeebc3e9a35346780b1074916a8f", 
                function(data, status){
                    alert("Status: " + status + " for " + data.length + " stations");
                });            
    }
</script>
<style>
    .copyright {
        color: blueviolet;
        font-size: 2em;
        font-style: italic;
    }
</style>